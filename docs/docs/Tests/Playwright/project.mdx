---
sidebar_position: 2
---

# ğŸ“‚ Projeto

## ğŸ”§ ConfiguraÃ§Ã£o e ExecuÃ§Ã£o

### ğŸ“‹ PrÃ©-requisitos

> **âš ï¸ Importante**: Certifique-se de que as dependÃªncias foram instaladas no projeto raiz "qa-solar" e que o comando `yarn dev` foi executado antes de iniciar os testes.

### ğŸš€ Comandos DisponÃ­veis

#### ConfiguraÃ§Ã£o Inicial
```bash
# Instalar dependÃªncias do Playwright
yarn play:install
```

#### ExecuÃ§Ã£o de Testes

**Modo Interativo (Playwright UI)**
```bash
# Abrir interface grÃ¡fica do Playwright
yarn play:open
```

**Modo Headless (CI/CD)**
```bash
# Executar todos os testes
yarn test

# Executar testes Playwright
yarn play:run
```

**UtilitÃ¡rios**
```bash
# Visualizar relatÃ³rios HTML
yarn play:report

# Executar linting
yarn lint
```

## ğŸ“‚ Estrutura do Projeto

```plaintext
tests/playwright/
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ specs/                                # EspecificaÃ§Ãµes de testes
â”‚   â”‚   â”œâ”€â”€ login.spec.ts                     # Testes de autenticaÃ§Ã£o
â”‚   â”‚   â”œâ”€â”€ registerUser.spec.ts              # Testes de cadastro
â”‚   â”‚   â”œâ”€â”€ profile.spec.ts                   # Testes de perfil
â”‚   â”‚   â”œâ”€â”€ listUsers.spec.ts                 # Testes de listagem
â”‚   â”‚   â””â”€â”€ recoverPassword.spec.ts           # Testes de recuperaÃ§Ã£o
â”‚   â”œâ”€â”€ shared/                               # UtilitÃ¡rios compartilhados
â”‚   â”‚   â”œâ”€â”€ commands/                         # Comandos customizados
â”‚   â”‚   â”‚   â”œâ”€â”€ fillUserForm.ts               # Helper para preenchimento
â”‚   â”‚   â”‚   â”œâ”€â”€ generateValidCPF.ts           # Gerador de CPF vÃ¡lido
â”‚   â”‚   â”‚   â””â”€â”€ login.ts                      # Comando de login
â”‚   â”‚   â”œâ”€â”€ mocks/                            # Mocks e dados de teste
â”‚   â”‚   â”‚   â””â”€â”€ generateUsers.ts              # GeraÃ§Ã£o de usuÃ¡rios
â”‚   â”‚   â””â”€â”€ utils/                            # UtilitÃ¡rios gerais
â”‚   â”œâ”€â”€ fixtures/                             # Dados de teste estÃ¡ticos
â”‚   â””â”€â”€ misc/                                 # Arquivos diversos
â”‚       â””â”€â”€ reports/                          # RelatÃ³rios de execuÃ§Ã£o
â”œâ”€â”€ .env                                      # VariÃ¡veis de ambiente
â”œâ”€â”€ playwright.config.ts                      # ConfiguraÃ§Ã£o principal
â”œâ”€â”€ package.json                              # DependÃªncias e scripts
â”œâ”€â”€ eslint.config.mjs                         # ConfiguraÃ§Ã£o ESLint
â””â”€â”€ CHANGELOG.md                              # HistÃ³rico de mudanÃ§as
```

## âš™ï¸ ConfiguraÃ§Ãµes AvanÃ§adas

### ğŸ”§ ConfiguraÃ§Ã£o do Playwright

O projeto utiliza configuraÃ§Ãµes otimizadas para performance e confiabilidade:

```typescript
// Principais configuraÃ§Ãµes
export default defineConfig({
  testDir: './tests/specs',                 // DiretÃ³rio dos testes
  outputDir: './tests/misc/reports',        // DiretÃ³rio de relatÃ³rios
  fullyParallel: true,                      // ExecuÃ§Ã£o paralela
  forbidOnly: !!process.env.CI,             // Bloqueia .only em CI
  retries: process.env.CI ? 2 : 0,          // Retry em CI
  workers: 1,                               // NÃºmero de workers
  reporter: 'html',                         // RelatÃ³rio HTML
  use: {
    acceptDownloads: false,                 // NÃ£o aceita downloads
    ignoreHTTPSErrors: true,                # Ignora erros HTTPS
    baseURL: process.env.PLAY_BASE_URL,     # URL base da aplicaÃ§Ã£o
    screenshot: 'only-on-failure',          # Screenshots em falhas
    trace: 'on-first-retry',                # Trace em retry
    viewport: { width: 1280, height: 720 }, # ResoluÃ§Ã£o padrÃ£o
  },
  expect: {
    timeout: 5000,                          # Timeout para assertions
    toHaveScreenshot: {
      animations: 'disabled',               # Desabilita animaÃ§Ãµes
      maxDiffPixels: 10,                    # TolerÃ¢ncia de pixels
    },
    toMatchSnapshot: {
      threshold: 0.1,                       # Threshold para snapshots
    },
  },
  projects: [
    {
      name: 'chromium',                     # Projeto Chromium
      use: { ...devices['Desktop Chrome'] }, # Dispositivo desktop
    },
  ]
});
```

### ğŸŒ VariÃ¡veis de Ambiente

```bash
# URLs de configuraÃ§Ã£o
PLAY_BASE_URL=http://localhost:8181         # URL da aplicaÃ§Ã£o frontend
PLAY_API_URL=http://localhost:3001          # URL da API backend
```

### ğŸ“Š ConfiguraÃ§Ã£o de Projetos

O Playwright suporta mÃºltiplos projetos para diferentes navegadores:

```typescript
projects: [
  {
    name: 'chromium',
    use: { ...devices['Desktop Chrome'] },
  },
  // Adicionar outros navegadores conforme necessÃ¡rio
  // {
  //   name: 'firefox',
  //   use: { ...devices['Desktop Firefox'] },
  // },
  // {
  //   name: 'webkit',
  //   use: { ...devices['Desktop Safari'] },
  // },
]
```

## ğŸ“š Comandos Customizados

### ğŸ” Comandos de AutenticaÃ§Ã£o

```typescript
// Login automatizado via API
export async function login(page: Page, email: string, password: string): Promise<void> {
  const response = await page.request.fetch(`${process.env.PLAY_API_URL}/auth/login`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    data: { email, password }
  });
  
  const { token } = JSON.parse(await response.text());
  
  await page.evaluate(({ token }) => {
    localStorage.setItem('user-token', token);
  }, { token });
}
```

### ğŸ“ Comandos de FormulÃ¡rio

```typescript
// Preenchimento automÃ¡tico de formulÃ¡rios
export async function fillUserForm(page: Page) {
  const cpf = generateValidCPF();
  
  const formFields = [
    { element: page.locator('[data-testid="input-fullname"]'), valor: faker.person.fullName() },
    { element: page.locator('[data-testid="input-socialname"]'), valor: faker.person.middleName() },
    { element: page.locator('[data-testid="input-document"]'), valor: cpf },
    // ... outros campos
  ];
  
  for (const field of formFields) {
    await field.element.waitFor({ state: 'visible' });
    await field.element.fill(field.valor);
  }
}
```

### ğŸ² GeraÃ§Ã£o de Dados

```typescript
// GeraÃ§Ã£o de CPF vÃ¡lido
export function generateValidCPF(): string {
  const baseDigits = generateRandomDigits(9);
  const firstVerifier = calculateVerifierDigit(baseDigits);
  const secondVerifier = calculateVerifierDigit(baseDigits + firstVerifier);
  const cpf = `${baseDigits}${firstVerifier}${secondVerifier}`;
  return formatCPF(cpf);
}
```

## ğŸ› ï¸ DependÃªncias Principais

### ProduÃ§Ã£o
- **@playwright/test**: `1.49.0` - Framework de testes
- **@faker-js/faker**: `9.8.0` - GeraÃ§Ã£o de dados fictÃ­cios
- **dotenv**: `16.4.5` - Gerenciamento de variÃ¡veis de ambiente

### Desenvolvimento
- **@types/node**: `22.16.0` - Tipos do Node.js
- **eslint**: `9.20.0` - Linting de cÃ³digo
- **eslint-plugin-playwright**: `2.2.0` - Regras especÃ­ficas do Playwright
